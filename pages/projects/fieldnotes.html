<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Field Notes - llizard development log</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,300;1,400&family=JetBrains+Mono:wght@300;400&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Night mode (default) */
            --bg-primary: #0f1a14;
            --bg-secondary: #1a2e22;
            --bg-card: #1e3328;
            --accent-primary: #5a9b6e;
            --accent-secondary: #7ec492;
            --accent-glow: rgba(126, 196, 146, 0.12);
            --text-primary: #e8efe9;
            --text-secondary: #b8cfbe;
            --text-muted: rgba(184, 207, 190, 0.65);
            --amber: #e2b86b;
            --amber-dim: rgba(226, 184, 107, 0.7);
            --border-color: rgba(90, 155, 110, 0.25);
            --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="day"] {
            --bg-primary: #f8f6f1;
            --bg-secondary: #efeae0;
            --bg-card: #ffffff;
            --accent-primary: #3d7a4f;
            --accent-secondary: #2d5e3c;
            --accent-glow: rgba(61, 122, 79, 0.08);
            --text-primary: #2a3a2e;
            --text-secondary: #4a5f4e;
            --text-muted: rgba(74, 95, 78, 0.7);
            --amber: #b8892d;
            --amber-dim: rgba(184, 137, 45, 0.8);
            --border-color: rgba(61, 122, 79, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background: var(--bg-primary);
            min-height: 100vh;
            color: var(--text-secondary);
            overflow-x: hidden;
            transition: background 0.4s var(--ease-smooth), color 0.4s var(--ease-smooth);
        }

        /* Grain texture */
        .grain {
            position: fixed;
            inset: 0;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
            z-index: 1000;
        }

        [data-theme="day"] .grain {
            opacity: 0.02;
        }

        /* Container */
        .container {
            max-width: 780px;
            margin: 0 auto;
            padding: 3rem 2rem 6rem;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 4rem;
            opacity: 0;
            animation: fadeIn 1.5s var(--ease-smooth) forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .logo {
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            color: var(--accent-primary);
            margin-bottom: 0.5rem;
            letter-spacing: 0.15em;
            transition: color 0.4s var(--ease-smooth);
        }

        .tagline {
            font-size: 1.1rem;
            font-style: italic;
            color: var(--accent-secondary);
            opacity: 0.75;
            transition: color 0.4s var(--ease-smooth);
        }

        .subtitle {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--text-muted);
            margin-top: 1rem;
            letter-spacing: 0.2em;
            transition: color 0.4s var(--ease-smooth);
        }

        /* Theme toggle */
        .theme-toggle {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            padding: 0.5rem 0.85rem;
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.3s var(--ease-smooth);
            z-index: 100;
            letter-spacing: 0.05em;
            border-radius: 2px;
        }

        .theme-toggle:hover {
            opacity: 1;
            background: var(--accent-glow);
            border-color: var(--accent-primary);
            color: var(--accent-secondary);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding-left: 2rem;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 1px;
            background: linear-gradient(
                to bottom,
                transparent,
                var(--accent-primary) 5%,
                var(--accent-primary) 95%,
                transparent
            );
            opacity: 0.35;
            transition: background 0.4s var(--ease-smooth);
        }

        /* Day entry */
        .day-entry {
            margin-bottom: 3rem;
            opacity: 0;
            animation: fadeIn 1s var(--ease-smooth) forwards;
            position: relative;
        }

        .day-entry::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0.5rem;
            width: 8px;
            height: 8px;
            background: var(--accent-primary);
            border-radius: 50%;
            transform: translateX(-3.5px);
            transition: background 0.4s var(--ease-smooth);
        }

        .day-entry:nth-child(1) { animation-delay: 0.2s; }
        .day-entry:nth-child(2) { animation-delay: 0.3s; }
        .day-entry:nth-child(3) { animation-delay: 0.4s; }
        .day-entry:nth-child(4) { animation-delay: 0.5s; }
        .day-entry:nth-child(5) { animation-delay: 0.6s; }
        .day-entry:nth-child(6) { animation-delay: 0.7s; }
        .day-entry:nth-child(7) { animation-delay: 0.8s; }

        .day-header {
            display: flex;
            align-items: baseline;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .day-date {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--amber);
            letter-spacing: 0.1em;
            transition: color 0.4s var(--ease-smooth);
        }

        .day-title {
            font-size: 1.35rem;
            color: var(--text-primary);
            font-weight: 400;
            transition: color 0.4s var(--ease-smooth);
        }

        .day-content {
            font-size: 1rem;
            line-height: 1.95;
            color: var(--text-secondary);
            transition: color 0.4s var(--ease-smooth);
        }

        .day-content p {
            margin-bottom: 1rem;
        }

        /* Update items */
        .updates {
            margin-top: 1.25rem;
        }

        .update-item {
            display: flex;
            gap: 0.85rem;
            margin-bottom: 0.85rem;
            padding: 0.85rem 1.1rem;
            background: var(--bg-card);
            border-left: 2px solid var(--accent-primary);
            transition: all 0.3s var(--ease-smooth);
            border-radius: 0 3px 3px 0;
        }

        .update-item:hover {
            background: var(--accent-glow);
            transform: translateX(4px);
            border-left-color: var(--accent-secondary);
        }

        .update-icon {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--accent-secondary);
            flex-shrink: 0;
            width: 1.5rem;
            transition: color 0.4s var(--ease-smooth);
        }

        .update-text {
            font-size: 0.9rem;
            line-height: 1.7;
        }

        .update-text strong {
            color: var(--accent-secondary);
            font-weight: 500;
            transition: color 0.4s var(--ease-smooth);
        }

        /* Tags */
        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1.25rem;
        }

        .tag {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.6rem;
            color: var(--accent-secondary);
            background: transparent;
            padding: 0.35rem 0.65rem;
            border: 1px solid var(--border-color);
            opacity: 0.65;
            letter-spacing: 0.05em;
            border-radius: 2px;
            transition: all 0.3s var(--ease-smooth);
        }

        .tag:hover {
            opacity: 1;
            border-color: var(--accent-primary);
        }

        /* Return link */
        .return-link {
            position: fixed;
            top: 1.5rem;
            left: 1.5rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.7rem;
            color: var(--text-muted);
            text-decoration: none;
            opacity: 0.5;
            transition: all 0.4s var(--ease-smooth);
            z-index: 100;
            letter-spacing: 0.05em;
        }

        .return-link:hover {
            opacity: 1;
            color: var(--accent-secondary);
        }

        /* Stillness message */
        .stillness-message {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.9rem;
            font-style: italic;
            color: var(--accent-secondary);
            opacity: 0;
            transition: opacity 2s var(--ease-smooth), color 0.4s var(--ease-smooth);
            pointer-events: none;
        }

        .stillness-message.visible {
            opacity: 0.55;
        }

        /* Decorative circuit lines */
        .circuit-line {
            position: fixed;
            background: var(--accent-primary);
            opacity: 0.06;
            transition: background 0.4s var(--ease-smooth);
        }

        [data-theme="day"] .circuit-line {
            opacity: 0.08;
        }

        .circuit-h { height: 1px; width: 60px; }
        .circuit-v { width: 1px; height: 60px; }

        .circuit-1 { top: 15%; right: 5%; }
        .circuit-2 { bottom: 25%; left: 3%; }
        .circuit-3 { top: 45%; right: 8%; }

        /* Note/aside style */
        .note {
            margin-top: 1.5rem;
            font-style: italic;
            opacity: 0.75;
            padding-left: 1rem;
            border-left: 2px solid var(--border-color);
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container { padding: 2rem 1.5rem 4rem; }
            .timeline { padding-left: 1.5rem; }
            .day-entry::before { left: -1.5rem; }
            .day-header { flex-direction: column; gap: 0.25rem; }
            .theme-toggle { top: auto; bottom: 1.5rem; right: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="grain"></div>

    <div class="circuit-line circuit-h circuit-1"></div>
    <div class="circuit-line circuit-v circuit-2"></div>
    <div class="circuit-line circuit-h circuit-3"></div>

    <a href="index.html" class="return-link">return to projects</a>
    <button class="theme-toggle" id="themeToggle">night</button>

    <div class="container">
        <header class="header">
            <div class="logo">field notes</div>
            <p class="tagline">observations from the llizard ecosystem</p>
            <p class="subtitle">a development log</p>
        </header>

        <div class="timeline">

            <!-- January 27, 2025 - View Album/Artist -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.27</span>
                    <h2 class="day-title">The music card opens its doors</h2>
                </div>
                <div class="day-content">
                    <p>Tap a song and the world behind it unfolds. Two new buttons appear beneath Now Playing when Spotify is the source - one for the album, one for the artist. Bottom sheets slide up with track listings, follower counts, genres, and top tracks. The data flows from Spotify's API through the SDK, through the controller, into modal surfaces that feel like opening a liner note.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>View Album sheet</strong> - album art, name, artists, release year, track count, label, and a full track listing with durations. The Spotify API's album endpoint finally has a home in the SDK.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>View Artist sheet</strong> - circular artist photo, follower count, genres, and top tracks with album art thumbnails. Two API calls combined into one coherent view.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>spotSDK endpoints</strong> - getAlbum, getArtist, getArtistTopTracks added to the API service. AlbumTracksWrapper model for the album's embedded track paging object.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>SpotifyPlaybackController</strong> learns fetchAlbumDetails and fetchArtistDetails - reusing the existing token infrastructure to serve the new sheets.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>MainViewModel</strong> extended with reactive detail state. Six new flows combined via chained combine operators, loading state properly reactive through the full chain.</span>
                        </div>
                    </div>

                    <p class="note">The buttons only appear when spotifyAlbumId or spotifyArtistId are present in MediaState - invisible for non-Spotify sources. The bottom sheets use Coil for async image loading and Material 3's ModalBottomSheet with skip-partial-expand for full-height content.</p>

                    <div class="tags">
                        <span class="tag">janus</span>
                        <span class="tag">spotsdk</span>
                        <span class="tag">spotify</span>
                        <span class="tag">bottom-sheets</span>
                        <span class="tag">compose</span>
                    </div>
                </div>
            </article>

            <!-- January 26, 2025 - Albums Plugin -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.26</span>
                    <h2 class="day-title">The library comes to the llizard</h2>
                </div>
                <div class="day-content">
                    <p>Your Spotify library now lives on the CarThing. A new Albums plugin presents your saved albums in a smooth carousel, album art floating past like vinyl in a crate. Select one and the music starts - the plugin bows out, Now Playing takes the stage. The whole stack learned new tricks to make it happen.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">★</span>
                            <span class="update-text"><strong>Albums plugin</strong> - carousel UI for browsing saved Spotify albums. Spring-based physics scrolling, album art from dual cache directories, auto-navigation to Now Playing after selection.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>SDK library API</strong> - new functions for fetching and displaying Spotify library data. LlzMediaRequestLibraryAlbums, LlzMediaGetLibraryAlbums, LlzMediaPlaySpotifyUri. The host speaks Spotify now.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>BLE response types 7-11</strong> - the Go bridge learns five new languages. Spotify state, library overview, track lists, album lists, playlist lists. Each reassembled from chunks, stored in Redis.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Separate preview cache</strong> - library album art (150×150) lives in /var/mediadash/album_art_previews. Now playing art (250×250) stays in album_art_cache. The Albums plugin checks both.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Auto token refresh</strong> - Janus no longer forgets its Spotify credentials. SpotifyLibraryManager refreshes expired tokens automatically. Play commands work without visiting the app first.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>play_uri command</strong> - BLE can now start any Spotify content. Albums, playlists, individual tracks - send the URI, music plays. The CarThing becomes a remote.</span>
                        </div>
                    </div>

                    <p class="note">The full vertical: CarThing requests albums → Go bridge sends BLE command → Janus fetches from Spotify API → chunks flow back → Redis stores → C plugin displays → user selects → play_uri command → music. Each layer trusts the next.</p>

                    <div class="tags">
                        <span class="tag">albums</span>
                        <span class="tag">spotify</span>
                        <span class="tag">sdk</span>
                        <span class="tag">mercury</span>
                        <span class="tag">janus</span>
                        <span class="tag">ble</span>
                    </div>
                </div>
            </article>

            <!-- January 25, 2025 - Queue Polish -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.25</span>
                    <h2 class="day-title">The queue learns to skip gracefully</h2>
                </div>
                <div class="day-content">
                    <p>When you skip through a queue of ten songs to reach the eleventh, you don't want to see nine flashing album covers along the way. The BLE bridge learns discretion - intermediate tracks pass in silence, only the destination announces itself.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Track change detection</strong> - the Queue plugin now polls media state every 500ms. When the track title changes, a fresh queue is requested automatically.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>"Now Playing" stays current</strong> - the queue's header item syncs directly from Redis media state, independent of queue API responses. No stale data.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Suppressed intermediate updates</strong> - during multi-skip queue jumps, MediaControllerManager silences metadata broadcasts. Only the final destination track triggers BLE notifications.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Skip callback system</strong> - skipToPositionLocal() now accepts an onBeforeSkip callback with (skipNumber, totalSkips, isFinalSkip). Callers control suppression timing.</span>
                        </div>
                    </div>

                    <p class="note">The pattern: suppress before intermediate skips, enable before the final one, always re-enable after completion (success or error). The user sees one smooth transition, not a slideshow.</p>

                    <div class="tags">
                        <span class="tag">queue</span>
                        <span class="tag">janus</span>
                        <span class="tag">ble</span>
                        <span class="tag">polish</span>
                    </div>
                </div>
            </article>

            <!-- January 24, 2025 - Spotify Integration -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.24</span>
                    <h2 class="day-title">Janus learns to speak Spotify</h2>
                </div>
                <div class="day-content">
                    <p>The Android companion app grows a new voice. A full Spotify integration page emerges - OAuth flows, library statistics, playback controls, and a queue viewer that lets you skip through your upcoming tracks. The spotSDK learns new endpoints, and the BLE bridge prepares to carry richer data.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">★</span>
                            <span class="update-text"><strong>Spotify Auth Page</strong> - complete OAuth 2.0 PKCE flow with configurable Client ID. Paste your credentials, login with Spotify, see your profile with avatar, premium status, and follower count.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Library statistics</strong> - saved tracks, albums, playlists, and followed artists displayed with refresh button. Currently playing and recently played tracks shown in real-time.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Playback controls</strong> - shuffle toggle (off/on) and repeat cycle (off/all/one). State syncs with Spotify and persists across app restarts.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Queue viewer</strong> - shows up to 10 upcoming tracks with album art, artist, and duration. Tap any track to skip forward through the queue (calls skip-to-next repeatedly to preserve queue context).</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>spotSDK endpoints</strong> - added playback state (GET /me/player), shuffle/repeat toggles, play endpoint, skip-to-next, and queue retrieval. user-follow-read scope for artist following.</span>
                        </div>
                    </div>

                    <p class="note">The queue skip uses Spotify's skip-to-next API repeatedly rather than playing tracks directly. This preserves the queue context - after the skipped-to track finishes, playback continues naturally.</p>

                    <div class="tags">
                        <span class="tag">janus</span>
                        <span class="tag">spotsdk</span>
                        <span class="tag">spotify</span>
                        <span class="tag">oauth</span>
                        <span class="tag">playback</span>
                    </div>
                </div>
            </article>

            <!-- January 24, 2025 - The Arena Evolves -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.24</span>
                    <h2 class="day-title">The arena learns who you are</h2>
                </div>
                <div class="day-content">
                    <p>LLZ Survivors grows a soul. Five warrior classes step into the arena, each with their own philosophy of survival. The upgrade screen becomes a shop where choices linger. Champions emerge from the horde with golden halos and dangerous gifts. The spatial grid learns to see, and the engine breathes easier.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">★</span>
                            <span class="update-text"><strong>Class selection system</strong> - five starting classes with unique stats. Warrior (130 HP, 15% armor), Scout (fast, +25% XP), Tank (180 HP, slow, 25% armor), Mage (60 HP, +40% XP, magic bonus), Balanced (classic mode). Carousel UI with stat previews.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">★</span>
                            <span class="update-text"><strong>Multi-upgrade shop</strong> - level-up screen transformed into a point-spending session. Buy multiple upgrades, see "SOLD OUT" on purchased cards, confirm when done. No more forced single choices.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Champion enemies</strong> - 5% of enemies after wave 3 spawn as Champions with random affixes. Swift (+50% speed), Vampiric (regenerates), Armored (50% DR), Splitter (spawns copies on death). Golden glow, 2.5x XP reward.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Spatial grid optimization</strong> - FindNearestEnemyGrid() replaces O(n) loops with grid cell queries. Melee spin and chain lightning now target through the grid. The engine runs lighter.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Enemy AI refactor</strong> - 200-line switch statement dissolved into function pointer dispatch. Each enemy type gets its own AI function. Adding new creatures is now a single function and one table entry.</span>
                        </div>
                    </div>

                    <p class="note">~900 lines added. The class system flows: Menu → Class Select → Weapon Select → Arena. Each class's preferred weapon gets bonus damage.</p>

                    <div class="tags">
                        <span class="tag">llzsurvivors</span>
                        <span class="tag">classes</span>
                        <span class="tag">champions</span>
                        <span class="tag">optimization</span>
                        <span class="tag">architecture</span>
                    </div>
                </div>
            </article>

            <!-- January 24, 2025 - Risk and Reward -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.24</span>
                    <h2 class="day-title">The arena rewards the bold</h2>
                </div>
                <div class="day-content">
                    <p>New systems emerge that reward aggression and punish complacency. Kill milestones mark your journey with permanent buffs. Danger zones bloom across the battlefield - step inside for bonus XP, pay with your health. The combo system learns to count higher, and each tier brings new power.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Kill milestone rewards</strong> - eight thresholds (50 to 2000 kills) with unique rewards. FIRST BLOOD heals, CENTURION grants upgrade points, EXTERMINATOR nukes the screen. Progress bar shows kills to next milestone.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Danger zones</strong> - hazardous areas spawn every 25 seconds after wave 2. Fire (2x XP, burns), Electric (1.75x XP, shocks), Slow (1.5x XP, drags). 3-second warning, 15-second duration, visible on minimap.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Combo tier system</strong> - seven tiers from Nice (5 kills) to GODLIKE (100+). Each tier adds XP bonus (up to 2x) and damage bonus (up to 30%). 2.5-second timeout keeps the pressure on.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Draw call optimizations</strong> - danger glow uses gradient rectangles (140 → 4 calls), enemy angles cached (no redundant atan2f), shielder arcs halved, minimap uses squared distance, particle system early-exits when empty.</span>
                        </div>
                    </div>

                    <p class="note">~850 more lines. Total survivors codebase now exceeds 7,000 lines. The CarThing's Cortex-A7 breathes easier with every optimization.</p>

                    <div class="tags">
                        <span class="tag">llzsurvivors</span>
                        <span class="tag">milestones</span>
                        <span class="tag">danger-zones</span>
                        <span class="tag">combo</span>
                        <span class="tag">performance</span>
                    </div>
                </div>
            </article>

            <!-- January 23, 2025 - Release Day -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.23</span>
                    <h2 class="day-title">The llizard emerges</h2>
                </div>
                <div class="day-content">
                    <p>Today marks the public release of llizardOS. The Fukai Sake Edition goes live - "deeply functional and beautiful, not quite perfect." The firmware, Android app, and all 18 plugins are now available on GitHub. A subreddit springs into existence.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">★</span>
                            <span class="update-text"><strong>LlizardOS open beta</strong> - full system image released with Void Linux, raylib DRM graphics, Redis state management, and the complete plugin ecosystem.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">★</span>
                            <span class="update-text"><strong>Janus APK</strong> - Android BLE companion app released. Reads media state from any app, broadcasts over Bluetooth, receives control commands.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>r/llizardOS</strong> - community subreddit created. Setup guides, discussions, and feature requests welcome.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>spotSDK</strong> begins development - a collection of service-specific SDKs for Spotify, Apple Music, YouTube Music. Unified APIs for media control across platforms.</span>
                        </div>
                    </div>

                    <p class="note">iOS support is planned. BLE implementation was designed with Apple requirements in mind - the slower BLE protocol allows for plug-and-play on iPhone once development begins.</p>

                    <div class="tags">
                        <span class="tag">release</span>
                        <span class="tag">llizardos</span>
                        <span class="tag">janus</span>
                        <span class="tag">spotsdk</span>
                        <span class="tag">community</span>
                    </div>
                </div>
            </article>

            <!-- January 23, 2025 - Bullet Hell -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.23</span>
                    <h2 class="day-title">The arena learns to fight back</h2>
                </div>
                <div class="day-content">
                    <p>Six new creatures enter the arena, each with their own philosophy of combat. The Hornet keeps its distance and draws lines of fire. The Spinner hides its eye until the storm passes. The Mirror asks: which one is real? The bullet hell has arrived.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Hornet enemy</strong> (Wave 8) - approaches to 250 units, stops, charges a laser for 1.5s with visible warning line, then fires a powerful beam that stays on course. Wasp-shaped with wings and stripes.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Spinner enemy</strong> (Wave 12) - fires spiral bullet patterns from rotating spokes. Only vulnerable when its eye opens between barrages. Classic shmup design.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Mirror enemy</strong> (Wave 13) - creates decoy copies of itself. Only the real one takes damage. Briefly reveals its true form (golden glow) after splitting.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Shielder enemy</strong> (Wave 14) - carries a rotating energy shield that blocks frontal attacks. Must be hit from behind. Performs charge attacks when close.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Bomber enemy</strong> (Wave 16) - drops clusters of delayed explosive mines. Stunned and vulnerable briefly after each drop. Mines blink faster as detonation approaches.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Phaser enemy</strong> (Wave 18) - phases in and out of reality. Only damageable when visible. Teleports near player and fires bullet bursts when phasing in. Ghost-like translucent form.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Enemy bullet system</strong> - new projectile pool for bullet hell patterns. Enemy bullets have glowing cores and damage player on contact.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Mine system</strong> - timed explosives with visual warning radius. Spiky appearance, blinking indicator accelerates before boom.</span>
                        </div>
                    </div>

                    <p class="note">Victory condition added: reach level 20 to win. Lifesteal nerfed with exponential dropoff - raw 50% becomes ~15% effective. The endgame now has teeth.</p>

                    <div class="tags">
                        <span class="tag">llzsurvivors</span>
                        <span class="tag">bullet-hell</span>
                        <span class="tag">enemies</span>
                        <span class="tag">balance</span>
                    </div>
                </div>
            </article>

            <!-- January 22, 2025 (evening) -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.22</span>
                    <h2 class="day-title">New creatures emerge, old ones grow wiser</h2>
                </div>
                <div class="day-content">
                    <p>LLZ Survivors hatched today - a Vampire Survivors-style arena game with skill trees and branching weapon paths. Meanwhile, Bejeweled learned to count its levels properly. The build pipeline grew a new helper script that knows where all the binaries live.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>LLZ Survivors plugin</strong> - arena survival game with 5 starting weapons, 3 skill branches each, potions, XP collection, and a scrolling world larger than the screen.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Bejeweled level progression fix</strong> - levels now actually increment based on score thresholds (was stuck at 1). Progress bar syncs with real level boundaries.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>copy_bins_before_commit_push.sh</strong> - new script in llizardOS that copies llizardGUI, mercury, 18 plugins, and question banks in one command.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">○</span>
                            <span class="update-text"><strong>Memory audit</strong> - verified both Bejeweled and Survivors use only static arrays, no leaks. SDK fonts are cached and properly cleaned.</span>
                        </div>
                    </div>

                    <p class="note">18 plugins now live in the llizardOS resources - five newcomers: bejeweled, llzsurvivors, media_channels, menu_sorter, plugin_manager.</p>

                    <div class="tags">
                        <span class="tag">llzsurvivors</span>
                        <span class="tag">bejeweled</span>
                        <span class="tag">build-tools</span>
                        <span class="tag">llizardos</span>
                        <span class="tag">memory</span>
                    </div>
                </div>
            </article>

            <!-- January 22, 2025 (morning) -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.22</span>
                    <h2 class="day-title">The back button learns patience</h2>
                </div>
                <div class="day-content">
                    <p>Today the SDK learned to distinguish between a quick tap and a thoughtful hold. The back button now understands intent - a brief press means "go back," while a longer hold opens the media channel selector without triggering navigation on release.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Back button hold detection</strong> - new SDK fields: backHold, backClick, backDown, backHoldTime. Long press (0.5s) triggers backHold, quick release triggers backClick.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Media channels popup</strong> in Now Playing - long-press back to open a floating panel for switching between Spotify, YouTube Music, Podcasts, and other active media sources.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Input event semantics</strong> - backReleased no longer fires after a long press. The hold was the action; the release is silence.</span>
                        </div>
                    </div>

                    <p class="note">Documentation updated across all repositories - SDK, Mercury, Janus, and LlizardOS now have comprehensive READMEs.</p>

                    <div class="tags">
                        <span class="tag">sdk</span>
                        <span class="tag">input</span>
                        <span class="tag">nowplaying</span>
                        <span class="tag">media-channels</span>
                        <span class="tag">documentation</span>
                    </div>
                </div>
            </article>

            <!-- January 21, 2025 -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.21</span>
                    <h2 class="day-title">Channels and courtesy</h2>
                </div>
                <div class="day-content">
                    <p>The media channel system grows more polite. When switching from Spotify to YouTube Music, the old app now gracefully pauses before the new one takes the stage. No more two voices speaking at once.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Media Channels plugin</strong> - a dedicated screen for browsing and selecting active media sources, accessible from Settings.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Refresh button</strong> in media channels - pull the latest list of active apps from your phone on demand.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Podcasts as a channel</strong> - Janus now reports its internal podcast player alongside external apps like Spotify.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Auto-pause on switch</strong> - changing channels pauses the currently playing app first. Courteous transitions.</span>
                        </div>
                    </div>

                    <div class="tags">
                        <span class="tag">media-channels</span>
                        <span class="tag">janus</span>
                        <span class="tag">podcasts</span>
                        <span class="tag">settings</span>
                    </div>
                </div>
            </article>

            <!-- January 20, 2025 -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.20</span>
                    <h2 class="day-title">Five ways to see a menu</h2>
                </div>
                <div class="day-content">
                    <p>The main menu now speaks five visual languages. List view for the minimalists, Carousel for those who like to swipe, Cards for the tactile, CarThing for nostalgia, and Grid for the Apple-hearted. Each style persists across reboots.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Grid menu style</strong> - a clean 3x2 icon grid with Apple-inspired white aesthetic and iBrand font.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>CarThing menu style</strong> - the original Spotify aesthetic returns, complete with Omicron and Tracklister fonts.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Menu style persistence</strong> - your preferred style survives power cycles via SDK config.</span>
                        </div>
                    </div>

                    <div class="tags">
                        <span class="tag">menu</span>
                        <span class="tag">ui</span>
                        <span class="tag">fonts</span>
                        <span class="tag">config</span>
                    </div>
                </div>
            </article>

            <!-- January 19, 2025 -->
            <article class="day-entry">
                <div class="day-header">
                    <span class="day-date">2025.01.19</span>
                    <h2 class="day-title">The blur follows the music</h2>
                </div>
                <div class="day-content">
                    <p>Album art now bleeds into the background. The SDK tracks album art changes in Redis and automatically generates blurred backdrops. Nine animated background styles can now inherit colors from whatever's playing.</p>

                    <div class="updates">
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Auto-blur album art</strong> - SDK background system tracks Redis album art keys and generates blur textures automatically.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">+</span>
                            <span class="update-text"><strong>Color extraction</strong> - dominant colors pulled from album art to tint UI elements and background animations.</span>
                        </div>
                        <div class="update-item">
                            <span class="update-icon">~</span>
                            <span class="update-text"><strong>Crossfade transitions</strong> - smooth alpha blending when album art changes. No jarring switches.</span>
                        </div>
                    </div>

                    <div class="tags">
                        <span class="tag">sdk</span>
                        <span class="tag">album-art</span>
                        <span class="tag">backgrounds</span>
                        <span class="tag">redis</span>
                    </div>
                </div>
            </article>

        </div>
    </div>

    <div class="stillness-message" id="stillnessMessage"></div>

    <script>
        // Theme management with cookies
        const themeToggle = document.getElementById('themeToggle');

        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
            return null;
        }

        function setCookie(name, value, days = 365) {
            const expires = new Date(Date.now() + days * 864e5).toUTCString();
            document.cookie = `${name}=${value}; expires=${expires}; path=/; SameSite=Lax`;
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            themeToggle.textContent = theme === 'day' ? 'day' : 'night';
            setCookie('fieldnotes-theme', theme);
        }

        // Initialize theme from cookie or default to night
        const savedTheme = getCookie('fieldnotes-theme') || 'night';
        setTheme(savedTheme);

        themeToggle.addEventListener('click', () => {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            setTheme(currentTheme === 'day' ? 'night' : 'day');
        });

        // Stillness messages
        const messages = [
            'the code grows in the quiet',
            'each commit, a small evolution',
            'cold-blooded progress',
            'the log remembers',
            'building in the margins of the day',
            'the arena never sleeps'
        ];

        let lastActivity = Date.now();
        let stillnessShown = false;
        const stillnessMessage = document.getElementById('stillnessMessage');

        function checkStillness() {
            const elapsed = Date.now() - lastActivity;

            if (elapsed > 10000 && !stillnessShown) {
                stillnessMessage.textContent = messages[Math.floor(Math.random() * messages.length)];
                stillnessMessage.classList.add('visible');
                stillnessShown = true;
            }

            requestAnimationFrame(checkStillness);
        }

        function resetStillness() {
            lastActivity = Date.now();
            if (stillnessShown) {
                stillnessMessage.classList.remove('visible');
                stillnessShown = false;
            }
        }

        document.addEventListener('mousemove', resetStillness, { passive: true });
        document.addEventListener('scroll', resetStillness, { passive: true });
        document.addEventListener('keydown', resetStillness);
        checkStillness();

        // Console
        console.log('%cfield notes', 'font-size: 14px; color: #5a9b6e; font-weight: 300;');
        console.log('%cobservations from the llizard ecosystem', 'font-size: 10px; color: #7ec492; font-style: italic;');

        // Right-click
        document.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            stillnessMessage.textContent = 'the work continues';
            stillnessMessage.classList.add('visible');
            setTimeout(() => stillnessMessage.classList.remove('visible'), 3000);
        });

        // Keyboard shortcut for theme toggle
        document.addEventListener('keydown', (e) => {
            if (e.key === 'd' && !e.ctrlKey && !e.metaKey) {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                setTheme(currentTheme === 'day' ? 'night' : 'day');
            }
        });
    </script>
</body>
</html>
